%p
  = f.label :email, Spree.t(:email)
  %br
  = f.email_field :email, class: 'title'

- if @unconfirmed_email
  %p.alert-box
    = t('spree.users.show.unconfirmed_email', unconfirmed_email: @unconfirmed_email)

- @user.build_bill_address if @user.bill_address.nil?
- @user.build_ship_address if @user.ship_address.nil?

%div{"id" => "password-credentials"}
  %p
    = f.label :password, Spree.t(:password)
    %br
    = f.password_field :password, class: 'title'

  %p
    = f.label :password_confirmation, t(:password_confirmation)
    %br
    = f.password_field :password_confirmation, class: 'title'

%h4= t("checkout.step1.billing_address.title")
- bill_address_country = @user.bill_address.country || DefaultCountry.country
= f.fields_for :bill_address do |bill_address|
  %p
    = bill_address.label :firstname, t("checkout.step1.billing_address.first_name.label")
    %br
    = bill_address.text_field :firstname, class: 'title'
  %p
    = bill_address.label :lastname, t("checkout.step1.billing_address.last_name.label")
    %br
    = bill_address.text_field :lastname, class: 'title'
  %p
    = bill_address.label :phone, t("checkout.step1.contact_information.phone.label")
    %br
    = bill_address.text_field :phone, class: 'title'
  %p
    = bill_address.label :address1, t("checkout.step1.address.address1.label")
    %br
    = bill_address.text_field :address1, class: 'title'
  %p
    = bill_address.label :address2, t("checkout.step1.address.address2.label")
    %br
    = bill_address.text_field :address2, class: 'title'
  %p
    = bill_address.label :city, t("checkout.step1.address.city.label")
    %br
    = bill_address.text_field :city, class: 'title'
  %p
    = bill_address.label :zipcode, t("checkout.step1.address.zipcode.label")
    %br
    = bill_address.text_field :zipcode, class: 'title'
  %p
    = bill_address.label :country_id, t("checkout.step1.address.country_id.label")
    %br
    = bill_address.select :country_id, countries, { selected: bill_address_country.id }, class: 'title'
  %p
    = bill_address.label :state_id, t("checkout.step1.address.state_id.label")
    %br
    = bill_address.select :state_id, states_for_country(bill_address_country), { selected: bill_address.object.state_id }, class: 'title'

%h4= t("checkout.step1.shipping_info.title")
- ship_address_country = @user.ship_address.country || DefaultCountry.country
= f.fields_for :ship_address do |ship_address|
  %p
    = ship_address.label :address1, t("checkout.step1.address.address1.label")
    %br
    = ship_address.text_field :address1, class: 'title'
  %p
    = ship_address.label :address2, t("checkout.step1.address.address2.label")
    %br
    = ship_address.text_field :address2, class: 'title'
  %p
    = ship_address.label :city, t("checkout.step1.address.city.label")
    %br
    = ship_address.text_field :city, class: 'title'
  %p
    = ship_address.label :zipcode, t("checkout.step1.address.zipcode.label")
    %br
    = ship_address.text_field :zipcode, class: 'title'
  %p
    = ship_address.label :country_id, t("checkout.step1.address.country_id.label")
    %br
    = ship_address.select :country_id, countries, { selected: ship_address_country.id }, class: 'title'
  %p
    = ship_address.label :state_id, t("checkout.step1.address.state_id.label")
    %br
    = ship_address.select :state_id, states_for_country(ship_address_country), { selected: ship_address.object.state_id }, class: 'title'
